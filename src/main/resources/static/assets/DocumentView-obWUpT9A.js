import{d as D,h as f,m as b,i as v,f as k,c as o,a as e,b as y,j as n,t as a,F as w,k as C,u as V,o as c}from"./index-0Kq7OocE.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"document-view"},A={key:0,class:"loading"},L={key:1,class:"error container"},S={key:2,class:"container"},x={class:"document card"},I={class:"meta"},M={class:"tags"},E=["innerHTML"],F=D({__name:"DocumentView",setup(H){const r=V(),i=k(),t=f(),m=b(()=>t.selectedDocument?t.selectedDocument.content.replace(/^### (.*$)/gim,"<h3>$1</h3>").replace(/^## (.*$)/gim,"<h2>$1</h2>").replace(/^# (.*$)/gim,"<h1>$1</h1>").replace(/\*\*(.*)\*\*/gim,"<strong>$1</strong>").replace(/\*(.*)\*/gim,"<em>$1</em>").replace(/\n/g,"<br/>"):"");v(async()=>{const s=parseInt(i.params.id);await t.loadDocument(s)});function p(){r.push({name:"home"})}function h(){r.push({name:"document-edit",params:{id:i.params.id}})}function _(){r.push({name:"document-versions",params:{id:i.params.id}})}async function g(){if(!confirm("Are you sure you want to delete this document?"))return;const s=parseInt(i.params.id);await t.deleteDocument(s),r.push({name:"home"})}function u(s){return new Date(s).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}return(s,d)=>(c(),o("div",B,[e("header",{class:"header"},[e("div",{class:"container"},[e("button",{class:"btn btn-secondary",onClick:p},"← Back"),e("div",{class:"actions"},[e("button",{class:"btn btn-secondary",onClick:_},"Versions"),e("button",{class:"btn btn-primary",onClick:h},"Edit"),e("button",{class:"btn btn-danger",onClick:g},"Delete")])])]),n(t).loading?(c(),o("div",A,[...d[0]||(d[0]=[e("div",{class:"spinner"},null,-1)])])):n(t).error?(c(),o("div",L,a(n(t).error),1)):n(t).selectedDocument?(c(),o("div",S,[e("article",x,[e("h1",null,a(n(t).selectedDocument.title),1),e("div",I,[e("span",null,"Created: "+a(u(n(t).selectedDocument.createdAt)),1),e("span",null,"Updated: "+a(u(n(t).selectedDocument.updatedAt)),1),e("span",null,"Version: "+a(n(t).selectedDocument.currentVersion),1)]),e("div",M,[(c(!0),o(w,null,C(n(t).selectedDocument.tags,l=>(c(),o("span",{key:l.id,class:"tag"},a(l.name),1))),128))]),e("div",{class:"markdown-content",innerHTML:m.value},null,8,E)])])):y("",!0)]))}}),T=$(F,[["__scopeId","data-v-43cb3918"]]);export{T as default};
