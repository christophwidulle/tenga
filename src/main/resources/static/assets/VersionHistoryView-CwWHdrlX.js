import{d as b,r as u,i as k,f as V,g as v,c as o,a as s,t as i,F as w,k as C,u as N,b as B,o as a}from"./index-0Kq7OocE.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"version-history"},D={class:"container"},F={key:0,class:"loading"},H={key:1,class:"error"},R={key:2,class:"empty-state"},x={key:3,class:"versions-list"},I={class:"version-header"},L={class:"date"},A={key:0,class:"change-summary"},E={class:"version-actions"},M=["onClick"],T=["onClick"],U=b({__name:"VersionHistoryView",setup(j){const m=N(),c=V(),l=u([]),d=u(!1),r=u(null);k(async()=>{await _()});async function _(){var t,e;d.value=!0,r.value=null;try{const n=parseInt(c.params.id);l.value=await v.getVersionHistory(n)}catch(n){r.value=((e=(t=n.response)==null?void 0:t.data)==null?void 0:e.message)||"Failed to load version history"}finally{d.value=!1}}function y(){m.push({name:"document",params:{id:c.params.id}})}function p(t){alert(`Viewing version ${t.versionNumber}:

${t.content.substring(0,200)}...`)}async function h(t){if(confirm(`Restore to version ${t.versionNumber}? This will create a new version.`))try{const e=parseInt(c.params.id);await v.restoreVersion(e,t.versionNumber),alert("Version restored successfully"),m.push({name:"document",params:{id:e}})}catch{alert("Failed to restore version")}}function f(t){return new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}return(t,e)=>(a(),o("div",$,[s("header",{class:"header"},[s("div",{class:"container"},[s("button",{class:"btn btn-secondary",onClick:y},"← Back to Document")])]),s("div",D,[e[2]||(e[2]=s("h2",null,"Version History",-1)),d.value?(a(),o("div",F,[...e[0]||(e[0]=[s("div",{class:"spinner"},null,-1)])])):r.value?(a(),o("div",H,i(r.value),1)):l.value.length===0?(a(),o("div",R,[...e[1]||(e[1]=[s("p",null,"No version history available",-1)])])):(a(),o("div",x,[(a(!0),o(w,null,C(l.value,n=>(a(),o("div",{key:n.id,class:"version-card card"},[s("div",I,[s("h3",null,"Version "+i(n.versionNumber),1),s("span",L,i(f(n.createdAt)),1)]),n.changeSummary?(a(),o("p",A,i(n.changeSummary),1)):B("",!0),s("div",E,[s("button",{class:"btn btn-secondary",onClick:g=>p(n)}," View ",8,M),s("button",{class:"btn btn-primary",onClick:g=>h(n)}," Restore ",8,T)])]))),128))]))])]))}}),G=S(U,[["__scopeId","data-v-795cc271"]]);export{G as default};
