import{d as D,h as x,r as i,m as g,f as V,i as $,c as _,a as t,t as k,e as p,b as C,v as m,u as S,o as f}from"./index-0Kq7OocE.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"document-edit"},E={class:"header"},I={class:"container"},U=["disabled"],B={class:"container"},H={class:"editor-layout"},L={class:"editor-panel card"},N={class:"tags-input"},P={key:0,class:"change-summary"},R={class:"preview-panel card"},j=["innerHTML"],q=D({__name:"DocumentEditView",setup(A){const u=S(),l=V(),v=x(),s=i(""),n=i(""),r=i(""),h=i(""),d=i(!1),c=g(()=>l.params.id!==void 0&&l.name==="document-edit"),y=g(()=>n.value.replace(/^### (.*$)/gim,"<h3>$1</h3>").replace(/^## (.*$)/gim,"<h2>$1</h2>").replace(/^# (.*$)/gim,"<h1>$1</h1>").replace(/\*\*(.*)\*\*/gim,"<strong>$1</strong>").replace(/\*(.*)\*/gim,"<em>$1</em>").replace(/\n/g,"<br/>"));$(async()=>{if(c.value){const o=parseInt(l.params.id),e=await v.loadDocument(o);e&&(s.value=e.title,n.value=e.content,r.value=e.tags.map(a=>a.name).join(", "))}});async function b(){if(!s.value||!n.value){alert("Title and content are required");return}d.value=!0;try{const o=r.value.split(",").map(e=>e.trim()).filter(e=>e.length>0);if(c.value){const e=parseInt(l.params.id);await v.updateDocument(e,s.value,n.value,o,h.value),u.push({name:"document",params:{id:e}})}else{const e=await v.createDocument(s.value,n.value,o);u.push({name:"document",params:{id:e.id}})}}catch{alert("Failed to save document")}finally{d.value=!1}}function w(){c.value?u.push({name:"document",params:{id:l.params.id}}):u.push({name:"home"})}return(o,e)=>(f(),_("div",T,[t("header",E,[t("div",I,[t("button",{class:"btn btn-secondary",onClick:w},"Cancel"),t("button",{class:"btn btn-primary",onClick:b,disabled:d.value},k(d.value?"Saving...":"Save"),9,U)])]),t("div",B,[t("div",H,[t("div",L,[p(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.value=a),type:"text",class:"input title-input",placeholder:"Document title..."},null,512),[[m,s.value]]),p(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=a=>n.value=a),class:"content-input",placeholder:"Write your content here (Markdown supported)..."},null,512),[[m,n.value]]),t("div",N,[e[4]||(e[4]=t("label",null,"Tags (comma-separated):",-1)),p(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>r.value=a),type:"text",class:"input",placeholder:"tag1, tag2, tag3"},null,512),[[m,r.value]])]),c.value?(f(),_("div",P,[e[5]||(e[5]=t("label",null,"Change Summary (optional):",-1)),p(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>h.value=a),type:"text",class:"input",placeholder:"Describe your changes..."},null,512),[[m,h.value]])])):C("",!0)]),t("div",R,[e[6]||(e[6]=t("h3",null,"Preview",-1)),t("div",{class:"markdown-content",innerHTML:y.value},null,8,j)])])])]))}}),z=M(q,[["__scopeId","data-v-bc36c59a"]]);export{z as default};
